import java.util.*;

class AutocompleteSystem {

    class TrieNode {
        TrieNode[] children = new TrieNode[26];
        List<String> top5 = new ArrayList<>();
    }

    private TrieNode root = new TrieNode();
    private Map<String, Integer> freq = new HashMap<>();

    public void insert(String word) {
        freq.put(word, freq.getOrDefault(word, 0) + 1);
        TrieNode node = root;

        for (char c : word.toCharArray()) {
            int idx = c - 'a';
            if (node.children[idx] == null)
                node.children[idx] = new TrieNode();
            node = node.children[idx];

            updateTop5(node, word);
        }
    }

    private void updateTop5(TrieNode node, String word) {
        if (!node.top5.contains(word))
            node.top5.add(word);

        node.top5.sort((a, b) -> {
            if (!freq.get(a).equals(freq.get(b)))
                return freq.get(b) - freq.get(a);
            return a.compareTo(b);
        });

        if (node.top5.size() > 5)
            node.top5.remove(5);
    }

    public List<String> search(String prefix) {
        TrieNode node = root;
        for (char c : prefix.toCharArray()) {
            int idx = c - 'a';
            if (node.children[idx] == null)
                return new ArrayList<>();
            node = node.children[idx];
        }
        return node.top5;
    }
}